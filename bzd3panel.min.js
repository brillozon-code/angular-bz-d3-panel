"use strict";angular.module("bzD3Module",[]).factory("d3Service",["$document","$q","$rootScope",function(a,b,c){function d(){c.$apply(function(){e.resolve(window.d3)})}var e=b.defer(),f=a[0].createElement("script");f.type="text/javascript",f.async=!0,f.src="http://d3js.org/d3.v3.min.js",f.onload=d,f.onreadystatechange=function(){"complete"==this.readyState&&d()};var g=a.prop("body");return g.appendChild(f),{d3:function(){return e.promise}}}]),angular.module("bzD3Module").directive("bzD3Panel",["d3Service","$window","$document",function(a,b,c){return{restrict:"EA",template:"<div ng-transclude></div>",transclude:!0,scope:{content:"=",draw:"="},link:function(c,d,e){a.d3().then(function(a){var f=(parseInt(e.margin)||20,parseInt(e.height)||50),g=(parseInt(e.padding)||5,a.select(d[0]).insert("svg",":first-child").style("stroke-width","0px").style("background-color","#bf8ea6").style("height",f).style("width","100%"));b.onresize=function(){c.$apply},c.$watch(function(){return d[0].firstElementChild.clientWidth},function(){c.content&&c.render(c.content.data)}),c.$watch("content",function(a,b){return c.content?c.render(c.content.data):void 0},!0),c.defaultDraw=function(a,b,c){var d=b.selectAll("g").data(c).enter().append("g");d.append("circle").style("fill","red").style("stroke","black").style("stroke-width","2").attr("cx",45).attr("cy",45).attr("r",40),d.append("text").attr("x",10).attr("y",40).text("LOL WUT")},c.render=function(b){if(c.draw)b&&c.draw(a,g,b);else{var d=[0];c.defaultDraw(a,g,d)}}})}}}]);